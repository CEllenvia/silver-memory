<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>CE 定番：每年对网进行一个可持续性换配置——EP0，在一切开始之前</title>
  <meta name="description" content="说是定番，画出来的四版里面也就第一版真正完整实践过，其他的要不做了一部分要不直接没做。而且第一版后面因为电价问题废弃了，又用回硬件路由了。  欢迎来到 CE 每半年的定番之翻新家庭网路！（啥）  CE 有些时候在学校里是真的闲的没事干才这样做。而且因为经济原因基本告吹。  但在经历了这么多次的不完整实践之后，我们家里的网路设备已经不存在无线设备的短缺，且实现了一定程度上的 Flexible——一">
<meta property="og:type" content="article">
<meta property="og:title" content="CE 定番：每年对网进行一个可持续性换配置——EP0，在一切开始之前">
<meta property="og:url" content="https://blog.christine.pp.ua/2023/09/17/new-network-architecture-ep0/index.html">
<meta property="og:site_name" content="Christine 自留地">
<meta property="og:description" content="说是定番，画出来的四版里面也就第一版真正完整实践过，其他的要不做了一部分要不直接没做。而且第一版后面因为电价问题废弃了，又用回硬件路由了。  欢迎来到 CE 每半年的定番之翻新家庭网路！（啥）  CE 有些时候在学校里是真的闲的没事干才这样做。而且因为经济原因基本告吹。  但在经历了这么多次的不完整实践之后，我们家里的网路设备已经不存在无线设备的短缺，且实现了一定程度上的 Flexible——一">
<meta property="og:locale">
<meta property="og:image" content="https://raw.githubusercontent.com/CEllenvia/studious-octo-machine/master/pics/IMG_20221016_125507_148.jpg">
<meta property="article:published_time" content="2023-09-17T08:25:21.000Z">
<meta property="article:modified_time" content="2023-09-28T13:25:13.155Z">
<meta property="article:author" content="Christine Ellenvia">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/CEllenvia/studious-octo-machine/master/pics/IMG_20221016_125507_148.jpg">
  
  
    <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v2/dist/waline.css"
  />
  
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sindresorhus/github-markdown-css/github-markdown.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
  <link rel="stylesheet" href="/css/layout.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Christine 自留地" type="application/atom+xml">
</head>

<body>
  <div class="page">
  <div class="title markdown-body">CE 定番：每年对网进行一个可持续性换配置——EP0，在一切开始之前</div>
  <div class="content markdown-body"><blockquote>
<p>说是定番，画出来的四版里面也就第一版真正完整实践过，其他的要不做了一部分要不直接没做。而且第一版后面因为电价问题废弃了，又用回硬件路由了。</p>
</blockquote>
<p>欢迎来到 CE 每半年的定番之翻新家庭网路！（啥）</p>
<blockquote>
<p>CE 有些时候在学校里是真的闲的没事干才这样做。而且因为经济原因基本告吹。</p>
</blockquote>
<p>但在经历了这么多次的不完整实践之后，我们家里的网路设备已经不存在无线设备的短缺，且实现了一定程度上的 Flexible——一会儿上图就可以表现出来。</p>
<p>所以这回的升级主要表现在——NAT 方面。</p>
<p>为啥？如图：</p>
<p>这是一台旁路由，而，这玩意的内存会 他 妈 的 炸！</p>
<blockquote>
<p>为啥硬路由当旁路由我们暂且不表。</p>
</blockquote>
<p>众所周知越高的 OpenWrt 系统的内存吃的越多，再配上智障般的插件把 xray 拷贝到 <code>/tmp</code> 运行，然后我这台可怜的 MT7981 内存就炸了。</p>
<blockquote>
<p>Press F to pay respects.png</p>
</blockquote>
<p>而又因为主路由是 IPQ5000 的 Xiaomi AX3000 （对就那个被疯狂骂智商税那款 AX3000，就那个和红米 AX3000 一起出来缩水的那个。我就是傻逼，我他），所以不得不把一些自定化的内容扔到 OpenWrt 上——比如说之前提到<a href="https://blog.christine.pp.ua/2023/07/01/where-fucking-are-you/">和 Lily 做异地组网</a>。</p>
<p>然后 Lily 那边访问不到我这边有些设备——因为是旁路由，如果网关不是 192.168.31.4 那就找不到回程了。（没做 NAT）</p>
<p>我就把主路由分配的 DHCP 里面的 Gateway 指向旁路由了。</p>
<p>然后我们家网路的 SLA 呈现一个<del>指数级</del>下滑。</p>
<p>这就是事件的起因。嗯。</p>
<h2 id="你正题呢？"><a href="#你正题呢？" class="headerlink" title="你正题呢？"></a>你正题呢？</h2><p>你看看文章才过去多长？</p>
<p>接下来让我来放一个我自己画的图。</p>
</div>
  
  <!-- 脚本文件 -->
  <div id="waline" class="content markdown-body">
    <script type="module">
      import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';
  
      init({
        el: '#waline',
        serverURL: 'https://c.api.christine.pp.ua',
        dark: 'auto'
      });  
    </script>
  </div>
  
</div>

  <div class="markdown-footer">
    
    <a href="https://icp.gov.moe/?keyword=20227040" target="_blank">萌ICP备20227040号</a>
    <br />
    
    <small>© <a href="/">Christine Ellenvia</a> - Powered By <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> And <a target="_blank" rel="noopener" href="https://github.com/ChristineEllenvia/merryx">MerryX</a></small>
  </div>
</body>

</html>
